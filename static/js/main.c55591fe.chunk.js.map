{"version":3,"sources":["ESCExchange.js","ETHExchange.js","God.js","MainView.js","App.js","serviceWorker.js","index.js"],"names":["ESCExchange","abi","JSON","parse","address","wethTokenABI","wethTokenAddress","ETHExchange","God","theEth","theWeb3","_theAccount","API","_contractInput","_contractOutput","_contractWETH","_networkId","onChangeNetwork","func","getNetwork","work","callback","console","log","this","eth","net","getNetworkType","then","network","getId","id","getAccount","getAccounts","accounts","getBalanceOfWETH","getWETHContract","methods","balanceOf","call","balance","getBalanceOfETH","getBalance","utils","fromWei","Contract","getInputContract","transfer","num","sendTransaction","from","to","value","toWei","String","error","hash","requestAPI","tx","errorCallback","s","axios","get","response","data","status","result","amount","BigNumber","token_address","catch","getOutputContract","withdraw","args","a","mintToken","txid","nonce","v","r","estimateGas","gas","send","res","e","MainView","props","state","dataString","onClickTransferButton","bind","onChangeValue","onChangeDataString","onClickSubmit","event","setState","parseFloat","currentTarget","style","margin","fontFamily","wallet","loaded","marginTop","marginBottom","onChange","placeholder","step","type","disabled","onClick","fontSize","message","useEthereum","React","Component","App","useState","me","setMe","setNet","setBalance","setMessage","setLoaded","setUseEthereum","setData","choiceNetwork","account","useEffect","window","ethereum","enable","Web3","givenProvider","autoRefreshOnNetworkChange","on","marginLeft","url","Boolean","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.c55591fe.chunk.js","sourcesContent":["const ESCExchange = {\n\tabi: JSON.parse('[ { \"constant\": true, \"inputs\": [ { \"name\": \"\", \"type\": \"address\" } ], \"name\": \"addressMapping\", \"outputs\": [ { \"name\": \"\", \"type\": \"address\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"name\": \"param1\", \"type\": \"address\" }, { \"name\": \"param2\", \"type\": \"address\" }, { \"name\": \"param3\", \"type\": \"uint256\" }, { \"name\": \"param4\", \"type\": \"uint256\" } ], \"name\": \"reserve3\", \"outputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"name\": \"_implementation\", \"type\": \"address\" } ], \"name\": \"upgrade\", \"outputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"name\": \"\", \"type\": \"address\" }, { \"name\": \"\", \"type\": \"uint256\" } ], \"name\": \"seenNonces\", \"outputs\": [ { \"name\": \"\", \"type\": \"bool\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"name\": \"txid\", \"type\": \"uint256\" }, { \"name\": \"to\", \"type\": \"address\" }, { \"name\": \"amount\", \"type\": \"uint256\" }, { \"name\": \"_nonce\", \"type\": \"uint256[]\" }, { \"name\": \"v\", \"type\": \"uint8[]\" }, { \"name\": \"r\", \"type\": \"bytes32[]\" }, { \"name\": \"s\", \"type\": \"bytes32[]\" } ], \"name\": \"withdrawEth\", \"outputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"name\": \"\", \"type\": \"address\" } ], \"name\": \"reserve_address_uint256\", \"outputs\": [ { \"name\": \"\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"name\": \"_fee\", \"type\": \"uint256\" } ], \"name\": \"setFeeRate\", \"outputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"name\": \"\", \"type\": \"uint256\" } ], \"name\": \"oracles\", \"outputs\": [ { \"name\": \"\", \"type\": \"address\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"name\": \"\", \"type\": \"address\" } ], \"name\": \"totalFee\", \"outputs\": [ { \"name\": \"\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"name\": \"\", \"type\": \"address\" } ], \"name\": \"reserve_address_address\", \"outputs\": [ { \"name\": \"\", \"type\": \"address\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"name\": \"\", \"type\": \"uint256\" } ], \"name\": \"reserve_uint256_bool\", \"outputs\": [ { \"name\": \"\", \"type\": \"bool\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [], \"name\": \"MAX_ORACLES_PARTYES\", \"outputs\": [ { \"name\": \"\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"name\": \"token_address\", \"type\": \"address\" }, { \"name\": \"txid\", \"type\": \"uint256\" }, { \"name\": \"to\", \"type\": \"address\" }, { \"name\": \"amount\", \"type\": \"uint256\" }, { \"name\": \"_nonce\", \"type\": \"uint256[]\" }, { \"name\": \"v\", \"type\": \"uint8[]\" }, { \"name\": \"r\", \"type\": \"bytes32[]\" }, { \"name\": \"s\", \"type\": \"bytes32[]\" } ], \"name\": \"mintToken\", \"outputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"name\": \"\", \"type\": \"uint256\" } ], \"name\": \"transactions\", \"outputs\": [ { \"name\": \"destination\", \"type\": \"address\" }, { \"name\": \"value\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [], \"name\": \"implementation_slot\", \"outputs\": [ { \"name\": \"\", \"type\": \"address\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"name\": \"ethTokenAddress\", \"type\": \"address\" }, { \"name\": \"escTokenAddress\", \"type\": \"address\" } ], \"name\": \"setTokenMapping\", \"outputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"name\": \"\", \"type\": \"address\" } ], \"name\": \"isOracle\", \"outputs\": [ { \"name\": \"\", \"type\": \"bool\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"name\": \"\", \"type\": \"uint256\" } ], \"name\": \"seenTxids\", \"outputs\": [ { \"name\": \"\", \"type\": \"bool\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [], \"name\": \"transactionCount\", \"outputs\": [ { \"name\": \"\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"name\": \"param1\", \"type\": \"address\" }, { \"name\": \"param2\", \"type\": \"uint256\" } ], \"name\": \"reserve\", \"outputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"name\": \"_required\", \"type\": \"uint256\" } ], \"name\": \"changeRequired\", \"outputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"name\": \"param1\", \"type\": \"address\" }, { \"name\": \"param2\", \"type\": \"address\" }, { \"name\": \"param3\", \"type\": \"uint256\" } ], \"name\": \"reserve2\", \"outputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [], \"name\": \"required\", \"outputs\": [ { \"name\": \"\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [], \"name\": \"fee\", \"outputs\": [ { \"name\": \"\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"name\": \"_oracle\", \"type\": \"address\" } ], \"name\": \"addOracle\", \"outputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [], \"name\": \"admin\", \"outputs\": [ { \"name\": \"\", \"type\": \"address\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"name\": \"_oracle\", \"type\": \"address\" } ], \"name\": \"removeOracle\", \"outputs\": [], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"inputs\": [ { \"name\": \"_oracles\", \"type\": \"address[]\" }, { \"name\": \"_required\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"constructor\" }, { \"payable\": true, \"stateMutability\": \"payable\", \"type\": \"fallback\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": true, \"name\": \"to\", \"type\": \"address\" }, { \"indexed\": true, \"name\": \"amount\", \"type\": \"uint256\" } ], \"name\": \"Execution\", \"type\": \"event\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": true, \"name\": \"to\", \"type\": \"address\" }, { \"indexed\": true, \"name\": \"amount\", \"type\": \"uint256\" } ], \"name\": \"ExecutionFailure\", \"type\": \"event\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": true, \"name\": \"fee\", \"type\": \"uint256\" } ], \"name\": \"SetFee\", \"type\": \"event\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": true, \"name\": \"tokenAddress\", \"type\": \"address\" }, { \"indexed\": true, \"name\": \"account\", \"type\": \"address\" }, { \"indexed\": false, \"name\": \"value\", \"type\": \"uint256\" } ], \"name\": \"MintToken\", \"type\": \"event\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": true, \"name\": \"ethTokenAddress\", \"type\": \"address\" }, { \"indexed\": true, \"name\": \"escTokenAddress\", \"type\": \"address\" } ], \"name\": \"SetTokenMapping\", \"type\": \"event\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": false, \"name\": \"_required\", \"type\": \"uint256\" } ], \"name\": \"RequirementChange\", \"type\": \"event\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": true, \"name\": \"_oracle\", \"type\": \"address\" } ], \"name\": \"OracleRemoval\", \"type\": \"event\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": true, \"name\": \"_oracle\", \"type\": \"address\" } ], \"name\": \"OracleAdded\", \"type\": \"event\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": true, \"name\": \"txid\", \"type\": \"uint256\" } ], \"name\": \"TxidVerified\", \"type\": \"event\" } ]'),\n\taddress: '0xb861A223A527e264B31244E2A8448Ba4D99d3E31',\n\twethTokenABI: JSON.parse('[ { \"constant\": false, \"inputs\": [ { \"name\": \"spender\", \"type\": \"address\" }, { \"name\": \"value\", \"type\": \"uint256\" } ], \"name\": \"approve\", \"outputs\": [ { \"name\": \"\", \"type\": \"bool\" } ], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [], \"name\": \"totalSupply\", \"outputs\": [ { \"name\": \"\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"name\": \"sender\", \"type\": \"address\" }, { \"name\": \"recipient\", \"type\": \"address\" }, { \"name\": \"amount\", \"type\": \"uint256\" } ], \"name\": \"transferFrom\", \"outputs\": [ { \"name\": \"\", \"type\": \"bool\" } ], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"name\": \"spender\", \"type\": \"address\" }, { \"name\": \"addedValue\", \"type\": \"uint256\" } ], \"name\": \"increaseAllowance\", \"outputs\": [ { \"name\": \"\", \"type\": \"bool\" } ], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"name\": \"account\", \"type\": \"address\" } ], \"name\": \"balanceOf\", \"outputs\": [ { \"name\": \"\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"name\": \"spender\", \"type\": \"address\" }, { \"name\": \"subtractedValue\", \"type\": \"uint256\" } ], \"name\": \"decreaseAllowance\", \"outputs\": [ { \"name\": \"\", \"type\": \"bool\" } ], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": false, \"inputs\": [ { \"name\": \"recipient\", \"type\": \"address\" }, { \"name\": \"amount\", \"type\": \"uint256\" } ], \"name\": \"transfer\", \"outputs\": [ { \"name\": \"\", \"type\": \"bool\" } ], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"function\" }, { \"constant\": true, \"inputs\": [ { \"name\": \"owner\", \"type\": \"address\" }, { \"name\": \"spender\", \"type\": \"address\" } ], \"name\": \"allowance\", \"outputs\": [ { \"name\": \"\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"view\", \"type\": \"function\" }, { \"inputs\": [ { \"name\": \"initialSupply\", \"type\": \"uint256\" } ], \"payable\": false, \"stateMutability\": \"nonpayable\", \"type\": \"constructor\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": true, \"name\": \"from\", \"type\": \"address\" }, { \"indexed\": true, \"name\": \"to\", \"type\": \"address\" }, { \"indexed\": false, \"name\": \"value\", \"type\": \"uint256\" } ], \"name\": \"Transfer\", \"type\": \"event\" }, { \"anonymous\": false, \"inputs\": [ { \"indexed\": true, \"name\": \"owner\", \"type\": \"address\" }, { \"indexed\": true, \"name\": \"spender\", \"type\": \"address\" }, { \"indexed\": false, \"name\": \"value\", \"type\": \"uint256\" } ], \"name\": \"Approval\", \"type\": \"event\" } ]'),\n\twethTokenAddress: \"0xeac3BD24AA8F3CBc3f5908c5690489Bce851C28E\"\n}\n\nexport default ESCExchange","const ETHExchange = {\n\tabi: JSON.parse('[{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"addressMapping\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"name\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"spender\",\"type\":\"address\"},{\"name\":\"value\",\"type\":\"uint256\"}],\"name\":\"approve\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"totalSupply\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"},{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"seenNonces\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"from\",\"type\":\"address\"},{\"name\":\"to\",\"type\":\"address\"},{\"name\":\"value\",\"type\":\"uint256\"}],\"name\":\"transferFrom\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"decimals\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"txid\",\"type\":\"uint256\"},{\"name\":\"to\",\"type\":\"address\"},{\"name\":\"value\",\"type\":\"uint256\"},{\"name\":\"_nonce\",\"type\":\"uint256[]\"},{\"name\":\"v\",\"type\":\"uint8[]\"},{\"name\":\"r\",\"type\":\"bytes32[]\"},{\"name\":\"s\",\"type\":\"bytes32[]\"}],\"name\":\"mint\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"cap\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"spender\",\"type\":\"address\"},{\"name\":\"addedValue\",\"type\":\"uint256\"}],\"name\":\"increaseAllowance\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"weth\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getOracles\",\"outputs\":[{\"name\":\"\",\"type\":\"address[]\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"value\",\"type\":\"uint256\"}],\"name\":\"burn\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_fee\",\"type\":\"uint256\"}],\"name\":\"setFeeRate\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"oracles\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"owner\",\"type\":\"address\"}],\"name\":\"balanceOf\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"from\",\"type\":\"address\"},{\"name\":\"value\",\"type\":\"uint256\"}],\"name\":\"burnFrom\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"totalFee\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"symbol\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"MAX_ORACLES_PARTYES\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"transactions\",\"outputs\":[{\"name\":\"destination\",\"type\":\"address\"},{\"name\":\"value\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"token_address\",\"type\":\"address\"},{\"name\":\"txid\",\"type\":\"uint256\"},{\"name\":\"to\",\"type\":\"address\"},{\"name\":\"amount\",\"type\":\"uint256\"},{\"name\":\"_nonce\",\"type\":\"uint256[]\"},{\"name\":\"v\",\"type\":\"uint8[]\"},{\"name\":\"r\",\"type\":\"bytes32[]\"},{\"name\":\"s\",\"type\":\"bytes32[]\"}],\"name\":\"withdrawToken\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"spender\",\"type\":\"address\"},{\"name\":\"subtractedValue\",\"type\":\"uint256\"}],\"name\":\"decreaseAllowance\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"ethTokenAddress\",\"type\":\"address\"},{\"name\":\"escTokenAddress\",\"type\":\"address\"}],\"name\":\"setTokenMapping\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"to\",\"type\":\"address\"},{\"name\":\"value\",\"type\":\"uint256\"}],\"name\":\"transfer\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"isOracle\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"seenTxids\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"transactionCount\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_required\",\"type\":\"uint256\"}],\"name\":\"changeRequired\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"required\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"owner\",\"type\":\"address\"},{\"name\":\"spender\",\"type\":\"address\"}],\"name\":\"allowance\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"fee\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_oracle\",\"type\":\"address\"}],\"name\":\"addOracle\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"admin\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_oracle\",\"type\":\"address\"}],\"name\":\"removeOracle\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"name\":\"name\",\"type\":\"string\"},{\"name\":\"symbol\",\"type\":\"string\"},{\"name\":\"decimals\",\"type\":\"uint8\"},{\"name\":\"cap\",\"type\":\"uint256\"},{\"name\":\"_oracles\",\"type\":\"address[]\"},{\"name\":\"_required\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"fallback\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"to\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"Execution\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"to\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"ExecutionFailure\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"fee\",\"type\":\"uint256\"}],\"name\":\"SetFee\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"ethTokenAddress\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"escTokenAddress\",\"type\":\"address\"}],\"name\":\"SetTokenMapping\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"_required\",\"type\":\"uint256\"}],\"name\":\"RequirementChange\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_oracle\",\"type\":\"address\"}],\"name\":\"OracleRemoval\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_oracle\",\"type\":\"address\"}],\"name\":\"OracleAdded\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"txid\",\"type\":\"uint256\"}],\"name\":\"TxidVerified\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"from\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"to\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"value\",\"type\":\"uint256\"}],\"name\":\"Transfer\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"owner\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"spender\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"value\",\"type\":\"uint256\"}],\"name\":\"Approval\",\"type\":\"event\"}]'),\n\taddress: '0x1944FF7cA3ae67a06Ee164a690c8B291e7Fae9d1'\n}\n\nexport default ETHExchange","import ESCExchange from './ESCExchange'\nimport BigNumber from 'bignumber.js'\nimport ETHExchange from \"./ETHExchange\"\nimport axios from 'axios'\n\nconst God = {\n\ttheEth: null,\n\ttheWeb3: null,\n\t_theAccount: '',\n\t// API: 'https://dev.elapp.org/api/v1/oracle/signature',\n\t// API: 'http://localhost:8080/api/v1/oracle/signature',\n\tAPI: 'http://104.224.180.40:8080/api/v1/oracle/signature',\n\t_contractInput: null,\n\t_contractOutput: null,\n\t_contractWETH: null,\n\t_networkId: 0,\n\n\tonChangeNetwork: function (func) {\n\t\tfunc()\n\t},\n\n\tgetNetwork: function (work, callback) {\n\t\tconsole.log(work)\n\n\t\tthis.theWeb3.eth.net.getNetworkType().then(network => {\n\t\t\tconsole.log(network)\n\n\t\t\tif (network === 'rinkeby') {\n\t\t\t\tthis.theWeb3.eth.net.getId().then(id => {\n\t\t\t\t\tconsole.log(id)\n\n\t\t\t\t\tif (id === 4) {\n\t\t\t\t\t\treturn callback(network)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t} else if (network === 'private') {\n\t\t\t\t// Elastos Test network.\n\t\t\t\tthis.theWeb3.eth.net.getId().then(id => {\n\t\t\t\t\treturn callback('Elastos Test network')\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\t},\n\n\tgetAccount: function (callback) {\n\t\tthis.theWeb3.eth.getAccounts().then(accounts => {\n\t\t\tthis._theAccount = accounts[0]\n\t\t\treturn callback(this._theAccount)\n\t\t})\n\t},\n\n\tgetBalanceOfWETH: function (callback) {\n\t\tthis.getWETHContract().methods.balanceOf(this._theAccount).call().then(balance => {\n\t\t\treturn callback(balance)\n\t\t})\n\t},\n\n\tgetBalanceOfETH: function (callback) {\n\t\tthis.theWeb3.eth.getBalance(this._theAccount).then(balance => {\n\t\t\treturn callback(this.theWeb3.utils.fromWei(balance, 'ether'))\n\t\t})\n\t},\n\n\tgetWETHContract: function () {\n\t\tif (!this._contractWETH) {\n\t\t\tthis._contractWETH = new this.theWeb3.eth.Contract(ESCExchange.wethTokenABI, ESCExchange.wethTokenAddress)\n\t\t}\n\n\t\treturn this._contractWETH\n\t},\n\n\tgetInputContract: function () {\n\t\tif (!this._contractInput) {\n\t\t\tthis._contractInput = new this.theWeb3.eth.Contract(ETHExchange.abi, ETHExchange.address)\n\t\t}\n\t\treturn this._contractInput\n\t},\n\n\t/**\n\t * 向初始合约发送指定ETH。\n\t * @param {Number} num 转帐数量\n\t * @param {Function} callback 成功后回调。\n\t */\n\ttransfer: function (num, callback) {\n\t\tthis.theWeb3.eth.sendTransaction({\n\t\t\tfrom: this._theAccount,\n\t\t\tto: ETHExchange.address,\n\t\t\tvalue: this.theWeb3.utils.toWei(String(num), 'ether')\n\t\t}, (error, hash) => {\n\t\t\tif (error) {\n\t\t\t\treturn console.error(error)\n\t\t\t} else {\n\t\t\t\treturn callback(hash)\n\t\t\t}\n\t\t})\n\t},\n\n\t/**\n\t * 请求签名接口。\n\t * @param {String} tx 转帐交易tx\n\t * @param {Function} callback 成功后回调\n\t */\n\trequestAPI: function (tx, callback, errorCallback) {\n\t\tconst s = this.API + '?txid=' + tx + '&chain_type=ETH'\n\n\t\t// fetch(s, {\n\t\t// \tmethod: 'GET',\n\t\t// \tmode: 'cors',\n\t\t// }).then(res => res.json()).then(responseJson => {\n\t\t// \tif (responseJson.status === 200) {\n\t\t// \t\treturn callback({\n\t\t// \t\t\t...responseJson.result,\n\t\t// \t\t\tamount: 3,\n\t\t// \t\t\ttoken_address: ETHExchange.address\n\t\t// \t\t})\n\t\t// \t}\n\t\t// }).catch(error => {\n\t\t// \tconsole.error(error);\n\t\t// \treturn errorCallback(s)\n\t\t// })\n\t\taxios.get(s).then(function (response) {\n\t\t\tif (response.data.status === 200) {\n\t\t\t\treturn callback({\n\t\t\t\t\t...response.data.result,\n\t\t\t\t\tamount: new BigNumber('1'),\n\t\t\t\t\ttoken_address: ETHExchange.address\n\t\t\t\t})\n\t\t\t}\n\t\t}).catch(function (error) {\n\t\t\tconsole.log(error);\n\t\t}).then(function () { })\n\t},\n\n\t/**\n\t * 根据签名接口返回的合约地址生成提币合约对象。\n\t */\n\tgetOutputContract: function () {\n\t\t// JSON RPC ➡ Testnet: https://rpc.elaeth.io, Mainnet: https://mainrpc.elaeth.io\n\t\tif (!this._contractOutput) {\n\t\t\tthis._contractOutput = new this.theWeb3.eth.Contract(ESCExchange.abi, ESCExchange.address)\n\t\t}\n\n\t\treturn this._contractOutput\n\t},\n\n\t/**\n\t * 提币操作。\n\t * @param {Object} args 参数对象。\n\t * @param {Function} callback 成功后回调。\n\t */\n\twithdraw: async function (args, callback) {\n\t\tconst func = this.getOutputContract().methods.mintToken(\n\t\t\targs.token_address,\n\t\t\targs.txid,\n\t\t\targs.to,\n\t\t\targs.amount,\n\t\t\t[args.nonce],\n\t\t\t[args.v],\n\t\t\t[args.r],\n\t\t\t[args.s]\n\t\t)\n\n\t\tfunc.estimateGas({ from: this._theAccount }).then(gas => {\n\t\t\tconsole.log('交易成本为：', gas)\n\n\t\t\tfunc.send({\n\t\t\t\tfrom: this._theAccount,\n\t\t\t\tgas: gas\n\t\t\t}).then((res) => {\n\t\t\t\tconsole.log(res)\n\t\t\t}).catch(e => {\n\t\t\t\tconsole.error(e)\n\t\t\t})\n\t\t})\n\t}\n}\n\nexport default God","import React from 'react'\n\nclass MainView extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\tvalue: 0,\n\t\t\tdataString: ''\n\t\t}\n\n\t\tthis.onClickTransferButton = this.onClickTransferButton.bind(this)\n\t\tthis.onChangeValue = this.onChangeValue.bind(this)\n\t\tthis.onChangeDataString = this.onChangeDataString.bind(this)\n\t\tthis.onClickSubmit = this.onClickSubmit.bind(this)\n\t}\n\n\tonClickTransferButton() {\n\t\tif (this.state.value > 0) {\n\t\t\treturn this.props.transfer(this.state.value)\n\t\t}\n\t}\n\n\tonChangeValue(event) {\n\t\tthis.setState({\n\t\t\tvalue: parseFloat(event.currentTarget.value)\n\t\t})\n\t}\n\n\tonChangeDataString(event) {\n\t\tthis.setState({\n\t\t\tdataString: event.currentTarget.value\n\t\t})\n\t}\n\n\tonClickSubmit(event) {\n\t\t// this.props.withdraw(JSON.parse(this.state.dataString).result)\n\t\tthis.props.withdraw()\n\t}\n\n\trender() {\n\t\treturn <div style={{\n\t\t\tmargin: '1rem',\n\t\t\tfontFamily: 'monospace'\n\t\t}}>\n\t\t\t<div>\n\t\t\t\t<span>Current Network: </span>\n\t\t\t\t<span>{this.props.net}</span>\n\t\t\t</div>\n\n\t\t\t<div>\n\t\t\t\t<span>Current Wallet: </span>\n\t\t\t\t<span>{this.props.wallet}</span>\n\t\t\t</div>\n\n\t\t\t<div>\n\t\t\t\t<span>ETH Balance: </span>\n\t\t\t\t<span>{this.props.balance}</span>\n\t\t\t</div>\n\n\t\t\t{this.props.loaded ? (\n\t\t\t\t<div style={{\n\t\t\t\t\tmarginTop: '1rem',\n\t\t\t\t\tmarginBottom: '1rem'\n\t\t\t\t}}>\n\t\t\t\t\t<div>Transfer ETH to WETH</div>\n\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tonChange={this.onChangeValue}\n\t\t\t\t\t\t\t\tplaceholder=\"ether\"\n\t\t\t\t\t\t\t\tstep=\"0.01\"\n\t\t\t\t\t\t\t\ttype=\"number\" />\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tdisabled={!(this.state.value > 0)}\n\t\t\t\t\t\t\tonClick={this.onClickTransferButton}>向Ethereum合约充值</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) : null}\n\n\t\t\t<div style={{\n\t\t\t\tfontSize: '0.8rem'\n\t\t\t}}>{this.props.message}</div>\n\n\t\t\t{!this.props.useEthereum ? (\n\t\t\t\t<div>\n\t\t\t\t\t{/* <textarea\n\t\t\t\t\t\tonChange={this.onChangeDataString}\n\t\t\t\t\t\tplaceholder=\"粘贴前述接口返回的Json字符串\" />\n\t\t\t\t\t<button onClick={this.onClickSubmit}>提取</button> */}\n\t\t\t\t\t<button onClick={this.onClickSubmit}>最后一步：提取</button>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</div>\n\t}\n}\n\nexport default MainView","import React, { useState, useEffect } from 'react';\nimport God from './God'\nimport MainView from './MainView'\nimport Web3 from 'web3'\n\nfunction App() {\n  const [me, setMe] = useState('')\n  const [net, setNet] = useState('')\n  const [balance, setBalance] = useState(0)\n  const [message, setMessage] = useState('')\n  const [loaded, setLoaded] = useState(false)\n  const [useEthereum, setUseEthereum] = useState(true)\n  const [data, setData] = useState(null)\n\n\n  /**\n   * 因为是测试模拟流程，所以没有实现基于web3的新建帐户或导入已有帐户私钥等功能，暂时先基于Metamask浏览器插件运行。\n   * 初始化时连接Metamask后，使用Metamask封装的web3进行链的操作。\n\t */\n  const init = () => {\n    if (typeof window.ethereum !== 'undefined') {\n      window.ethereum.enable()\n\n      God.theWeb3 = new Web3(Web3.givenProvider)\n      God.theEth = window.ethereum\n\n      window.ethereum.autoRefreshOnNetworkChange = false\n      window.ethereum.on('networkChanged', network => {\n        choiceNetwork()\n      })\n    }\n\n    setMessage('请选择Network: Rinkeby Test Network')\n    choiceNetwork()\n  }\n\n  const choiceNetwork = () => {\n    God.getNetwork(useEthereum, network => {\n      setNet(network)\n\n      God.getAccount(account => {\n        setMe(account)\n\n        God.getBalanceOfETH(eth => {\n          setBalance(eth)\n        })\n\n        setLoaded(true)\n\n        if (network === 'Elastos Test network') {\n          setUseEthereum(false)\n        }\n      })\n    })\n  }\n\n  const transfer = (num) => {\n    setMessage('正在向指定合约转帐，等待唤起Metamask……')\n\n    God.transfer(num, tx => {\n      setMessage('转帐请求（' + tx + '）正在确认，请求签名接口……')\n\n      God.requestAPI(tx, result => {\n        if (result) {\n          setData(result)\n          setMessage('请在 Metamask 中切换到 Elastos Test Network！')\n        }\n      }, url => {\n        setMessage('请求接口失败：' + url + '\\n\\n请在 Metamask 中切换到 Elastos Test Network！')\n        setUseEthereum(false)\n      })\n    })\n  }\n\n  // const withdraw = data => {\n  //   God.withdraw(data, () => {\n  //     setMessage('流程结束，提取请求正在等待节点确认……')\n  //   })\n  // }\n  const withdraw = () => {\n    God.withdraw(data, () => {\n      setMessage('流程结束，提取请求正在等待节点确认……')\n    })\n  }\n\n  useEffect(init, [])\n\n  return (\n    <div style={{ marginLeft: '1rem' }}>\n      <h1>Smart Contract Testing</h1>\n\n      <MainView\n        net={net}\n        wallet={me}\n        balance={balance}\n        transfer={transfer}\n        loaded={loaded}\n        useEthereum={useEthereum}\n        withdraw={withdraw}\n        message={message} />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}